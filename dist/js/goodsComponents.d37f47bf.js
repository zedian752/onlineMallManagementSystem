(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goodsComponents"],{"08f3":function(e,t,a){},"0925":function(e,t,a){},"10e3":function(e,t,a){"use strict";var r=a("08f3"),i=a.n(r);i.a},"11d4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("添加商品")])],1),a("el-card",[a("el-alert",{attrs:{tpye:"info",title:"添加商品信息",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{space:200,active:+e.activeStep,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":e.beforeTabLeave},on:{"tab-click":e.onTabClick},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProp,clearable:"",size:"medium"},on:{change:e.onCascaderChange},model:{value:e.addForm.goods_cat,callback:function(t){e.$set(e.addForm,"goods_cat",t)},expression:"addForm.goods_cat"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:e.addForm.goods_name,callback:function(t){e.$set(e.addForm,"goods_name",t)},expression:"addForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_price,callback:function(t){e.$set(e.addForm,"goods_price",t)},expression:"addForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品数目",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_number,callback:function(t){e.$set(e.addForm,"goods_number",t)},expression:"addForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_weight,callback:function(t){e.$set(e.addForm,"goods_weight",t)},expression:"addForm.goods_weight"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},[e.manyData.length?a("div",e._l(e.manyData,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[a("el-checkbox-group",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}},e._l(t.attr_vals,(function(e,t){return a("el-checkbox",{key:t,attrs:{border:"",label:e}})})),1)],1)})),1):a("div",[e._v("暂无数据")])]),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},[e.onlyData.length?a("div",e._l(e.onlyData,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[a("el-input",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1):a("div",[e._v("暂无数据")])]),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{headers:e.uploadPicHeader,action:e.uploadPicUrl,"on-preview":e.onPicPreview,"on-remove":e.onPicRemove,"on-success":e.onPicUploadSuccess,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:e.addForm.goods_introduce,callback:function(t){e.$set(e.addForm,"goods_introduce",t)},expression:"addForm.goods_introduce"}}),a("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.picPreviewVisible,width:"80%"},on:{"update:visible":function(t){e.picPreviewVisible=t}}},[a("img",{staticClass:"preview-img",attrs:{src:e.previewPath}})])],1)},i=[],n=(a("c740"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),o=a("6ac5"),s={data:function(){return{activeStep:"0",addForm:{goods_name:"",goods_price:"",goods_number:"",goods_weight:"",goods_cat:[],pics:[],goods_introduce:"",attrs:[]},previewPath:"",picPreviewVisible:!1,addFormRules:{goods_name:o["a"].goods_name,goods_price:o["a"].goods_price,goods_number:o["a"].goods_number,goods_weight:o["a"].goods_weight,goods_cat:o["a"].goods_cat},parentCateList:[],cascaderProp:{value:"cat_id",label:"cat_name",children:"children",expandTrigger:"hover"},manyData:[],onlyData:[],uploadPicUrl:"http://127.0.0.1:8888/api/private/v1/upload",uploadPicHeader:{Authorization:window.sessionStorage.getItem("token")}}},methods:{getParentCateList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories",{params:{type:3}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取父级分类失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},onCascaderChange:function(){if(3!==this.addForm.goods_cat.length)return this.$message.error("请选择三级分类"),void(this.addForm.goods_cat=[])},beforeTabLeave:function(e,t){if("0"===t&&0===this.addForm.goods_cat.length)return this.$message.error("请先选择商品分类"),!1},onTabClick:function(){"1"===this.activeStep?this.getParamsData("many"):"2"===this.activeStep&&this.getParamsData("only")},getParamsData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.get("categories/".concat(t.cateId,"/attributes"),{params:{sel:e}});case 2:if(r=a.sent,i=r.data,200===i.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("获取动态参数列表失败"));case 6:if("only"!==e){a.next=9;break}return t.onlyData=i.data,a.abrupt("return");case 9:i.data.forEach((function(e){e.attr_vals=0===e.attr_vals.length?[]:e.attr_vals.split(" ")})),t.manyData=i.data;case 11:case"end":return a.stop()}}),a)})))()},onPicPreview:function(e){this.previewPath=e.response.data.url,this.picPreviewVisible=!0},onPicRemove:function(e){var t=e.response.data.tmp_path,a=this.addForm.pics.findIndex((function(e){return e["pic"]===t}));this.addForm.pics.splice(a,1)},onPicUploadSuccess:function(e){var t={pic:e.data.tmp_path};this.addForm.pics.push(t)},addGoods:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("请填写必需的表单项"));case 2:return e.manyData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals.join(" ")};e.addForm.attrs.push(a)})),e.onlyData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals};e.addForm.attrs.push(a)})),r=JSON.parse(JSON.stringify(e.addForm)),r.goods_cat=r.goods_cat.join(","),t.next=8,e.$axios.post("goods",r);case 8:if(i=t.sent,n=i.data,201===n.meta.status){t.next=12;break}return t.abrupt("return",e.$message.error("添加商品失败,请确保全部信息填写完整"));case 12:e.$message.success("添加商品成功！"),e.$router.push("/goods");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.getParentCateList(),window.addform=this.addForm},computed:{cateId:function(){return this.addForm.goods_cat[2]}}},l=s,c=(a("10e3"),a("2877")),u=Object(c["a"])(l,r,i,!1,null,"07306bc6",null);t["default"]=u.exports},1276:function(e,t,a){"use strict";var r=a("d784"),i=a("44e7"),n=a("825a"),o=a("1d80"),s=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),g=a("d039"),m=[].push,p=Math.min,f=4294967295,b=!g((function(){return!RegExp(f,"y")}));r("split",2,(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=String(o(this)),n=void 0===a?f:a>>>0;if(0===n)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,n);var s,l,c,u=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,b=new RegExp(e.source,g+"g");while(s=d.call(b,r)){if(l=b.lastIndex,l>p&&(u.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&m.apply(u,s.slice(1)),c=s[0].length,p=l,u.length>=n))break;b.lastIndex===s.index&&b.lastIndex++}return p===r.length?!c&&b.test("")||u.push(""):u.push(r.slice(p)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var i=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,i,a):r.call(String(i),t,a)},function(e,i){var o=a(r,e,this,i,r!==t);if(o.done)return o.value;var d=n(e),g=String(this),m=s(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),y=new m(b?d:"^(?:"+d.source+")",v),_=void 0===i?f:i>>>0;if(0===_)return[];if(0===g.length)return null===u(y,g)?[g]:[];var w=0,x=0,C=[];while(x<g.length){y.lastIndex=b?x:0;var D,P=u(y,b?g:g.slice(x));if(null===P||(D=p(c(y.lastIndex+(b?0:x)),g.length))===w)x=l(g,x,h);else{if(C.push(g.slice(w,x)),C.length===_)return C;for(var k=1;k<=P.length-1;k++)if(C.push(P[k]),C.length===_)return C;x=w=D}}return C.push(g.slice(w)),C}]}),!b)},"12c2":function(e,t,a){"use strict";var r=a("0925"),i=a.n(r);i.a},"14c3":function(e,t,a){var r=a("c6b6"),i=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var n=a.call(e,t);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"159b":function(e,t,a){var r=a("da84"),i=a("fdbc"),n=a("17c2"),o=a("9112");for(var s in i){var l=r[s],c=l&&l.prototype;if(c&&c.forEach!==n)try{o(c,"forEach",n)}catch(u){c.forEach=n}}},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,i=a("a640"),n=a("ae40"),o=i("forEach"),s=n("forEach");e.exports=o&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,a){"use strict";var r=a("23e7"),i=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"44e7":function(e,t,a){var r=a("861d"),i=a("c6b6"),n=a("b622"),o=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"498a":function(e,t,a){"use strict";var r=a("23e7"),i=a("58a8").trim,n=a("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"4b66":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isAddCategoryDialogVisible=!0}}},[e._v("添加分类")])],1)],1),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.catelist,"row-key":"cat_id",border:"",lazy:!0,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"180"}}),a("el-table-column",{attrs:{prop:"cat_name",label:"分类名词",width:"180"}}),a("el-table-column",{attrs:{prop:"cat_deleted",label:"是否有效",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-tag",{class:e.row.cat_deleted?"el-icon-close":"el-icon-check",attrs:{type:e.row.cat_deleted?"danger":"success"}})]}}])}),a("el-table-column",{attrs:{prop:"cat_level",label:"排序",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===t.row.cat_level?"":1===t.row.cat_level?"success":"warning"}},[e._v(e._s(0===t.row.cat_level?"一级":1===t.row.cat_level?"二级":"三级"))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.editCategoryById(t.row.cat_id)}}},[e._v("编辑分类")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.removeUserById(t.row.cat_id,t.row.cat_name)}}},[e._v("删除分类")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,5,10,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("AddCategoryDialog",{ref:"addCategoryDialogRef",attrs:{propisAddCategoryDialogVisible:e.isAddCategoryDialogVisible},on:{"update:propisAddCategoryDialogVisible":function(t){e.isAddCategoryDialogVisible=t},"update:propis-add-category-dialog-visible":function(t){e.isAddCategoryDialogVisible=t},getCategoriesList:function(t){return e.getCategoriesList()}}}),a("editCategoryDialog",{attrs:{propisEditCategoryDialogVisible:e.isEditCategoryDialogVisible,editCategoryId:e.editCategoryId},on:{"update:propisEditCategoryDialogVisible":function(t){e.isEditCategoryDialogVisible=t},"update:propis-edit-category-dialog-visible":function(t){e.isEditCategoryDialogVisible=t},getCategorysList:function(t){return e.onEditCategoryInfo()}}})],1)},i=[],n=(a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加分类",visible:e.isAddCategoryDialogVisible,width:"50%"},on:{"update:visible":function(t){e.isAddCategoryDialogVisible=t},close:function(t){return e.addCateDialogClose()}}},[a("el-form",{ref:"addCategoryFormRef",attrs:{model:e.addCategoryForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.addCategoryForm.cat_name,callback:function(t){e.$set(e.addCategoryForm,"cat_name",t)},expression:"addCategoryForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类",prop:"cat_pid"}},[a("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProp,clearable:""},on:{change:e.parentCateChanged},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isAddCategoryDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCategory()}}},[e._v("确 定")])],1)],1)},s=[],l=(a("fb6a"),{data:function(){return{isAddCategoryDialogVisible:!1,addCategoryForm:{cat_name:"",cat_pid:0,cat_level:0},parentCateList:[],cascaderProp:{value:"cat_id",label:"cat_name",children:"children",expandTrigger:"hover",checkStrictly:!0},selectedKeys:[]}},props:{propisAddCategoryDialogVisible:Boolean},beforeCreate:function(){this.rules={cat_name:[{required:!0,message:"必须填入分类名称",trigger:"blur"}]}},methods:{resetAddCategoryForm:function(){this.$refs.addCategoryFormRef.resetFields()},addCategory:function(){var e=this;this.$refs.addCategoryFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$axios.post("categories",e.addCategoryForm);case 4:if(r=t.sent,i=r.data,201===i.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加分类失败"));case 8:e.$message.success("添加分类成功"),e.getParentCateList(),e.$emit("getCategoriesList"),e.isAddCategoryDialogVisible=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getParentCateList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories",{params:{type:2}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取父级分类失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},parentCateChanged:function(){this.addCategoryForm.cat_pid=this.selectedKeys.slice(-1)[0],this.addCategoryForm.cat_level=this.selectedKeys.length},addCateDialogClose:function(){this.$refs.addCategoryFormRef.resetFields(),this.selectedKeys=[],this.addCategoryForm.cat_level=this.addCategoryForm.cat_pid=0}},created:function(){this.getParentCateList()},watch:{isAddCategoryDialogVisible:function(e){this.$emit("update:propisAddCategoryDialogVisible",e)},propisAddCategoryDialogVisible:function(e){this.isAddCategoryDialogVisible=e}}}),c=l,u=a("2877"),d=Object(u["a"])(c,o,s,!1,null,null,null),g=d.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改用户",visible:e.isEditCategoryDialogVisible,width:"40%"},on:{"update:visible":function(t){e.isEditCategoryDialogVisible=t}}},[a("el-form",{ref:"editCategoryInfoForm",attrs:{model:e.editCategoryForm,"label-width":"81px"}},[a("el-form-item",{attrs:{label:"新名称",required:""}},[a("el-input",{model:{value:e.editCategoryForm.cat_name,callback:function(t){e.$set(e.editCategoryForm,"cat_name",t)},expression:"editCategoryForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isEditCategoryDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCategoryInfo()}}},[e._v("确 定")])],1)],1)},p=[],f=(a("a9e3"),{data:function(){return{isEditCategoryDialogVisible:!1,editCategoryForm:{cat_name:""}}},props:{propisEditCategoryDialogVisible:Boolean,editCategoryId:Number},methods:{editCategoryInfo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.put("categories/"+e.editCategoryId,{cat_name:e.editCategoryForm.cat_name});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("修改分类失败"));case 6:e.$message.success("修改分类成功"),e.isEditCategoryDialogVisible=!1,e.$emit("getCategorysList");case 9:case"end":return t.stop()}}),t)})))()}},watch:{isEditCategoryDialogVisible:function(e){this.$emit("update:propisEditCategoryDialogVisible",e)},propisEditCategoryDialogVisible:function(e){this.isEditCategoryDialogVisible=e}}}),b=f,h=Object(u["a"])(b,m,p,!1,null,null,null),v=h.exports,y={data:function(){return{queryInfo:{type:3,pagenum:1,pagesize:5},catelist:[],total:void 0,isAddCategoryDialogVisible:!1,isEditCategoryDialogVisible:!1,editCategoryId:void 0}},components:{AddCategoryDialog:g,editCategoryDialog:v},created:function(){this.getCategoriesList()},methods:{getCategoriesList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories",{params:e.queryInfo});case 2:a=t.sent,r=a.data,200!==r.meta.status&&e.$message.error("获取商品信息失败"),e.catelist=r.data.result,e.total=r.data.total;case 7:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCategoriesList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCategoriesList()},removeUserById:function(e,t){var a=this;this.$confirm('此操作将永久删除该分类"'.concat(t,'"是否继续?'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$axios.delete("categories/"+e);case 2:r=t.sent,i=r.data,200===i.meta.status?(a.$message.success("删除成功"),a.getCategoriesList(),a.$refs.addCategoryDialogRef.getParentCateList()):a.$message.warning("删除失败!");case 5:case"end":return t.stop()}}),t)})))).catch((function(){a.$message.info("已取消删除")}))},editCategoryById:function(e){this.editCategoryId=e,this.isEditCategoryDialogVisible=!0},onEditCategoryInfo:function(){this.getCategoriesList(),this.$refs.addCategoryDialogRef.getParentCateList()}}},_=y,w=Object(u["a"])(_,r,i,!1,null,null,null);t["default"]=w.exports},6547:function(e,t,a){var r=a("a691"),i=a("1d80"),n=function(e){return function(t,a){var n,o,s=String(i(t)),l=r(a),c=s.length;return l<0||l>=c?e?"":void 0:(n=s.charCodeAt(l),n<55296||n>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):n:e?s.slice(l,l+2):o-56320+(n-55296<<10)+65536)}};e.exports={codeAt:n(!1),charAt:n(!0)}},"6ac5":function(e,t,a){"use strict";var r=function(e,t,a){var r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+\.([a-zA-Z0-9_-])+$/;if(r.test(t))return a();a(new Error("邮箱格式有误"))},i=function(e,t,a){var r=/^(1[3|5-9]\d{9})$/;if(r.test(t))return a();a(new Error("手机格式有误"))};t["a"]={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"请输入长度为3~10位以内的用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"请输入长度为6~15位以内的密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:r,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:i,trigger:"blur"}],goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数目",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}],address_province:[{required:!0,message:"请选择省市区县",trigger:"blur"}],address_detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}},"8aa5":function(e,t,a){"use strict";var r=a("6547").charAt;e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},9263:function(e,t,a){"use strict";var r=a("ad6d"),i=a("9f7f"),n=RegExp.prototype.exec,o=String.prototype.replace,s=n,l=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(s=function(e){var t,a,i,s,d=this,g=c&&d.sticky,m=r.call(d),p=d.source,f=0,b=e;return g&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),b=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(p="(?: "+p+")",b=" "+b,f++),a=new RegExp("^(?:"+p+")",m)),u&&(a=new RegExp("^"+p+"$(?!\\s)",m)),l&&(t=d.lastIndex),i=n.call(g?a:d,b),g?i?(i.input=i.input.slice(f),i[0]=i[0].slice(f),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:l&&i&&(d.lastIndex=d.global?i.index+i[0].length:t),u&&i&&i.length>1&&o.call(i[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},"9f7f":function(e,t,a){"use strict";var r=a("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,a){"use strict";var r=a("23e7"),i=a("44ad"),n=a("fc6a"),o=a("a640"),s=[].join,l=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(n(this),void 0===e?",":e)}})},a434:function(e,t,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),o=a("50c4"),s=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),g=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!g||!m},{splice:function(e,t){var a,r,u,d,g,m,v=s(this),y=o(v.length),_=i(e,y),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=y-_):(a=w-2,r=f(p(n(t),0),y-_)),y+a-r>b)throw TypeError(h);for(u=l(v,r),d=0;d<r;d++)g=_+d,g in v&&c(u,d,v[g]);if(u.length=r,a<r){for(d=_;d<y-r;d++)g=d+r,m=d+a,g in v?v[m]=v[g]:delete v[m];for(d=y;d>y-r+a;d--)delete v[d-1]}else if(a>r)for(d=y-r;d>_;d--)g=d+r-1,m=d+a-1,g in v?v[m]=v[g]:delete v[m];for(d=0;d<a;d++)v[d+_]=arguments[d+2];return v.length=y-r+a,u}})},a640:function(e,t,a){"use strict";var r=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},a652:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("参数列表")])],1),a("el-card",[a("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning",effect:"dark","show-icon":"",closable:!1}}),a("el-row",{staticClass:"cat_opt"},[a("el-col",[a("span",[e._v("选择商品分类：")])]),a("el-col",[a("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProp,clearable:""},on:{change:e.parentCateChanged},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("el-row",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabsClick},model:{value:e.tabsActiveName,callback:function(t){e.tabsActiveName=t},expression:"tabsActiveName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{disabled:!e.selectedKeys.length,type:"primary"},on:{click:function(t){e.isAddParamDialogVisible=!0}}},[e._v("添加参数")]),a("el-table",{attrs:{border:"",stripe:"",data:e.manyTableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,i){return a("el-tag",{key:i,attrs:{closable:""},on:{close:function(a){return e.onTagClose(t.row,i)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.addNewTag(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.addNewTag(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showAddTagInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作",prop:"attr_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showEditParamDialog(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.showDeleteParamDialog(t.row)}}},[e._v("刪除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{disabled:!e.selectedKeys.length,type:"primary"},on:{click:function(t){e.isAddParamDialogVisible=!0}}},[e._v("添加属性")]),a("el-table",{attrs:{border:"",stripe:"",data:e.onlyTableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,i){return a("el-tag",{key:i,attrs:{closable:""},on:{close:function(a){return e.onTagClose(t.row,i)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.addNewTag(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.addNewTag(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showAddTagInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作",prop:"attr_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showEditParamDialog(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.showDeleteParamDialog(t.row)}}},[e._v("刪除")])]}}])})],1)],1)],1)],1)],1),a("addParamDialog",{attrs:{propisAddParamDialogVisible:e.isAddParamDialogVisible,activeName:e.tabsActiveName,catId:e.categoryInfoForm.cat_id},on:{"update:propisAddParamDialogVisible":function(t){e.isAddParamDialogVisible=t},"update:propis-add-param-dialog-visible":function(t){e.isAddParamDialogVisible=t},getParamsData:function(t){return e.getParamsData()}}}),a("deleteParamDialog",{attrs:{propisDeleteParamDialogVisible:e.isDeleteParamDialogVisible,activeName:e.tabsActiveName,deleteParamForm:e.deleteParamForm},on:{"update:propisDeleteParamDialogVisible":function(t){e.isDeleteParamDialogVisible=t},"update:propis-delete-param-dialog-visible":function(t){e.isDeleteParamDialogVisible=t},getParamsData:function(t){return e.getParamsData()}}}),a("editParamDialog",{attrs:{propisEditParamDialogVisible:e.isEditParamDialogVisible,activeName:e.tabsActiveName,editParamForm:e.editParamForm},on:{"update:propisEditParamDialogVisible":function(t){e.isEditParamDialogVisible=t},"update:propis-edit-param-dialog-visible":function(t){e.isEditParamDialogVisible=t},getParamsData:function(t){return e.getParamsData()}}})],1)},i=[],n=(a("99af"),a("4160"),a("a15b"),a("fb6a"),a("a434"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"many"===e.activeName?"添加参数":"添加属性",visible:e.isAddParamDialogVisible,width:"40%"},on:{"update:visible":function(t){e.isAddParamDialogVisible=t},close:e.onDialogClose}},[a("el-form",{ref:"addParamInfoForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"81px"}},[a("el-form-item",{attrs:{label:"新名称",prop:"attr_name"}},[a("el-input",{model:{value:e.addForm.attr_name,callback:function(t){e.$set(e.addForm,"attr_name",t)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isAddParamDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addParam()}}},[e._v("确 定")])],1)],1)},s=[],l=(a("a9e3"),{data:function(){return{isAddParamDialogVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},props:{activeName:String,propisAddParamDialogVisible:Boolean,catId:{type:Number,default:0}},methods:{onDialogClose:function(){this.$refs.addParamInfoForm.resetFields()},addParam:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addParamInfoForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$axios.post("categories/".concat(e.catId,"/attributes"),{attr_name:e.addForm.attr_name,attr_sel:e.activeName});case 4:if(r=t.sent,i=r.data,201===i.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加参数失败"));case 8:e.$message.success("添加参数成功"),e.$emit("getParamsData");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{isAddParamDialogVisible:function(e){this.$emit("update:propisAddParamDialogVisible",e)},propisAddParamDialogVisible:function(e){this.isAddParamDialogVisible=e}}}),c=l,u=a("2877"),d=Object(u["a"])(c,o,s,!1,null,null,null),g=d.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleText,visible:e.isDeleteParamDialogVisible,width:"40%"},on:{"update:visible":function(t){e.isDeleteParamDialogVisible=t}}},[a("div",[e._v('是否要删除"'+e._s(e.deleteParamForm.attr_name)+'"')]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isDeleteParamDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.DeleteParam()}}},[e._v("确 定")])],1)])},p=[],f={data:function(){return{isDeleteParamDialogVisible:!1}},props:{activeName:String,propisDeleteParamDialogVisible:Boolean,deleteParamForm:Object},methods:{DeleteParam:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.delete("categories/".concat(e.deleteParamForm.cat_id,"/attributes/").concat(e.deleteParamForm.attr_id));case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("删除失败"));case 6:e.$message.success("删除成功"),e.$emit("getParamsData"),e.isDeleteParamDialogVisible=!1;case 9:case"end":return t.stop()}}),t)})))()}},computed:{titleText:function(){return"many"===this.activeName?"删除动态参数":"删除静态属性"}},watch:{isDeleteParamDialogVisible:function(e){this.$emit("update:propisDeleteParamDialogVisible",e)},propisDeleteParamDialogVisible:function(e){this.isDeleteParamDialogVisible=e}}},b=f,h=Object(u["a"])(b,m,p,!1,null,null,null),v=h.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleText,visible:e.isEditParamDialogVisible,width:"40%"},on:{"update:visible":function(t){e.isEditParamDialogVisible=t},close:e.onDialogClose}},[a("el-form",{attrs:{"label-width":"81px"}},[a("el-form-item",{attrs:{label:"新名称",required:""}},[a("el-input",{model:{value:e.new_attr_name,callback:function(t){e.new_attr_name=t},expression:"new_attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isEditParamDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditParam()}}},[e._v("确 定")])],1)],1)},_=[],w={data:function(){return{isEditParamDialogVisible:!1,new_attr_name:""}},props:{activeName:String,propisEditParamDialogVisible:Boolean,editParamForm:Object},methods:{EditParam:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.put("categories/".concat(e.editParamForm.cat_id,"/attributes/").concat(e.editParamForm.attr_id),{attr_name:e.new_attr_name,attr_sel:e.activeName});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("修改失败"));case 6:e.$message.success("修改成功"),e.$emit("getParamsData"),e.isEditParamDialogVisible=!1;case 9:case"end":return t.stop()}}),t)})))()},onDialogClose:function(){this.new_attr_name=""}},computed:{titleText:function(){return"many"===this.activeName?"修改动态参数":"修改静态属性"}},watch:{isEditParamDialogVisible:function(e){this.$emit("update:propisEditParamDialogVisible",e)},propisEditParamDialogVisible:function(e){this.isEditParamDialogVisible=e}}},x=w,C=Object(u["a"])(x,y,_,!1,null,null,null),D=C.exports,P={data:function(){return{parentCateList:[],cascaderProp:{value:"cat_id",label:"cat_name",children:"children",expandTrigger:"hover"},selectedKeys:[],categoryInfoForm:{cat_id:0},tabsActiveName:"many",onlyTableData:void 0,manyTableData:void 0,isAddParamDialogVisible:!1,isDeleteParamDialogVisible:!1,deleteParamForm:{},isEditParamDialogVisible:!1,editParamForm:{}}},components:{addParamDialog:g,deleteParamDialog:v,editParamDialog:D},methods:{getParamsData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(3===e.selectedKeys.length){t.next=9;break}if(e.selectedKeys=[],e.onlyTableData=[],e.manyTableData=[],0!==e.selectedKeys.length){t.next=8;break}return t.abrupt("return",e.$message("请先选择商品分类"));case 8:return t.abrupt("return",e.$message.error("只允许为第三级分类设置相关参数！"));case 9:return e.categoryInfoForm.cat_id=e.selectedKeys.slice(-1)[0],t.next=12,e.$axios.get("categories/".concat(e.categoryInfoForm.cat_id,"/attributes"),{params:{sel:e.tabsActiveName}});case 12:if(a=t.sent,r=a.data,200===r.meta.status){t.next=16;break}return t.abrupt("return",e.$message.error("获取参数失败"));case 16:r.data.forEach((function(e){e.attr_vals=e.attr_vals?e.attr_vals.split(" "):[],e.inputVisible=!1,e.inputValue=""})),"many"===e.tabsActiveName?e.manyTableData=r.data:"only"===e.tabsActiveName&&(e.onlyTableData=r.data);case 18:case"end":return t.stop()}}),t)})))()},getParentCateList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories",{params:{type:3}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取父级分类失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},parentCateChanged:function(){this.getParamsData()},onTabsClick:function(){this.getParamsData()},showDeleteParamDialog:function(e){this.deleteParamForm.cat_id=e.cat_id,this.deleteParamForm.attr_id=e.attr_id,this.deleteParamForm.attr_name=e.attr_name,this.isDeleteParamDialogVisible=!0},showEditParamDialog:function(e){this.editParamForm=e,this.isEditParamDialogVisible=!0},showAddTagInput:function(e){var t=this;e.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},editNewAttrValues:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.put("categories/".concat(e.cat_id,"/attributes/").concat(e.attr_id),{attr_name:e.attr_name,attr_sel:t.tabsActiveName,attr_vals:e.attr_vals.join(" ")});case 2:if(r=a.sent,i=r.data,200===i.meta.status){a.next=7;break}return t.$message.error("增加新标签失败"),a.abrupt("return",!1);case 7:return a.abrupt("return",!0);case 8:case"end":return a.stop()}}),a)})))()},addNewTag:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==e.inputValue.trim().length){a.next=4;break}return e.inputValue="",e.inputVisible=!1,a.abrupt("return");case 4:return e.attr_vals.push(e.inputValue.trim()),e.inputVisible=!1,e.inputValue="",a.next=9,t.editNewAttrValues(e);case 9:r=a.sent,!1===r&&e.attr_vals.pop();case 11:case"end":return a.stop()}}),a)})))()},onTagClose:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.attr_vals.splice(t,1),r.next=3,a.editNewAttrValues(e);case 3:n=r.sent,!1===n&&e.attr_vals.splice(t,0,i[0]);case 5:case"end":return r.stop()}}),r)})))()}},created:function(){this.getParentCateList()}},k=P,V=(a("12c2"),Object(u["a"])(k,r,i,!1,null,"106875ec",null));t["default"]=V.exports},ac1f:function(e,t,a){"use strict";var r=a("23e7"),i=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,a){"use strict";var r=a("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c740:function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,n=a("44d2"),o=a("ae40"),s="findIndex",l=!0,c=o(s);s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},c8d2:function(e,t,a){var r=a("d039"),i=a("5899"),n="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||n[e]()!=n||i[e].name!==e}))}},d784:function(e,t,a){"use strict";a("ac1f");var r=a("6eeb"),i=a("d039"),n=a("b622"),o=a("9263"),s=a("9112"),l=n("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=n("replace"),g=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),m=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,d){var p=n(e),f=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),b=f&&!i((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return t=!0,null},a[p](""),!t}));if(!f||!b||"replace"===e&&(!c||!u||g)||"split"===e&&!m){var h=/./[p],v=a(p,""[e],(function(e,t,a,r,i){return t.exec===o?f&&!i?{done:!0,value:h.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),y=v[0],_=v[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},efde:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getGoodsList()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.gotoAddPage}},[e._v("添加商品")])],1)],1),a("el-table",{attrs:{data:e.goodsInfo.goodslist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"商品id",prop:"goods_id",width:"50px"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"goods_name"}}),a("el-table-column",{attrs:{label:"商品价格(元)",prop:"goods_price",width:"75px"}}),a("el-table-column",{attrs:{label:"商品重量",prop:"goods_weight",width:"75px"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"add_time",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.add_time)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:"修改商品信息",placement:"bottom",enterable:!1}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showEditGoodsInfoDialog(t.row.goods_id)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"删除商品",placement:"bottom",enterable:!1}},[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.removeGoodsById(t.row.goods_id)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,5,10,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.goodsInfo.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],n=(a("96cf"),a("1da1")),o={components:{},data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:5},goodsInfo:{goodslist:[],total:0},isEditGoodsDialogVisible:!1,isAssignRoleDialogVisible:!1,editGoodsId:void 0,assignRoleInfo:void 0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("goods",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,e.goodsInfo.goodslist=r.data.goods,e.goodsInfo.total=r.data.total,200===r.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},removeGoodsById:function(e){var t=this;this.$confirm("此操作将删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.delete("Goods/"+e);case 2:r=a.sent,i=r.data,200===i.meta.status?(t.$message.success("删除成功"),t.getGoodsList()):t.$message.warning("删除失败!");case 5:case"end":return a.stop()}}),a)})))).catch((function(){t.$message.info("已取消删除")}))},showEditGoodsInfoDialog:function(e){this.editGoodsId=e,this.isEditGoodsDialogVisible=!0},showAssignRoleDialog:function(e){this.assignRoleInfo=e,this.isAssignRoleDialogVisible=!0},gotoAddPage:function(){this.$router.push("/goods/add")}},watch:{}},s=o,l=a("2877"),c=Object(l["a"])(s,r,i,!1,null,null,null);t["default"]=c.exports},fb6a:function(e,t,a){"use strict";var r=a("23e7"),i=a("861d"),n=a("e8b5"),o=a("23cb"),s=a("50c4"),l=a("fc6a"),c=a("8418"),u=a("b622"),d=a("1dde"),g=a("ae40"),m=d("slice"),p=g("slice",{ACCESSORS:!0,0:0,1:2}),f=u("species"),b=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var a,r,u,d=l(this),g=s(d.length),m=o(e,g),p=o(void 0===t?g:t,g);if(n(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(d,m,p);for(r=new(void 0===a?Array:a)(h(p-m,0)),u=0;m<p;m++,u++)m in d&&c(r,u,d[m]);return r.length=u,r}})},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=goodsComponents.d37f47bf.js.map